<?xml version="1.0"?>
<!--
  ~ Milyn - Copyright (C) 2006 - 2010
  ~
  ~ This library is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU Lesser General Public
  ~ License (version 2.1) as published by the Free Software
  ~ Foundation.
  ~
  ~ This library is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~
  ~ See the GNU Lesser General Public License for more details:
  ~ http://www.gnu.org/licenses/lgpl.txt
  -->

<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
                      xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.4.xsd"
                      xmlns:camel="http://www.milyn.org/xsd/smooks/camel-1.4.xsd"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xsi:schemaLocation="http://www.milyn.org/xsd/smooks-1.1.xsd http://www.milyn.org/xsd/smooks-1.1.xsd
				                          http://www.milyn.org/xsd/smooks/javabean-1.3.xsd http://www.milyn.org/xsd/smooks/javabean-1.3.xsd
				                          http://www.milyn.org/xsd/smooks/camel-1.4.xsd http://www.milyn.org/xsd/smooks/camel-1.4.xsd">

    <!-- Create a new Coordinate instance for every <coord> in the source message... -->
    <jb:bean beanId="coordinate" class="org.milyn.smooks.camel.Coordinate" createOnElement="coords/coord">
        <jb:value property="x" data="coords/coord/@x" />
        <jb:value property="y" data="coords/coord/@y" />
    </jb:bean>
    
    <!-- Route "coordinate" bean instances for processing... -->
    <camel:route beanId="coordinate">
        <camel:to endpoint="direct:b"><!-- coordinate.x < 200 --></camel:to> 
        <camel:to endpoint="direct:c" if="coordinate.x > 200" /> 
    </camel:route>

</smooks-resource-list>