<?xml version="1.0"?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
	xmlns:db="http://www.milyn.org/xsd/smooks/db-routing-1.1.xsd"
	xmlns:file="http://www.milyn.org/xsd/smooks/file-routing-1.1.xsd"
	xmlns:io="http://www.milyn.org/xsd/smooks/io-routing-1.1.xsd"
	xmlns:jms="http://www.milyn.org/xsd/smooks/jms-routing-1.1.xsd">

	<db:executor
		executeOnElement="A"
		datasource="database"
		executeBefore="false"
		targetProfile="someTarget">

		<db:statement>SELECT * FROM some_table</db:statement>

		<db:resultSet
			name="someTableResultSet"
			scope="EXECUTION"
			timeToLive="900000" />

	</db:executor>

	<db:resultsetRowSelector
		selectRowOnElement="B"
		beanId="rowId"
		resultSetName=""
		executeBefore="false"
		targetProfile="someTarget">

		<db:where>someField = 'someValue'</db:where>

		<db:failedSelectError>Couldn't find row</db:failedSelectError>

	</db:resultsetRowSelector>

	<file:outputStream
		bindOnElement="C"
		resourceName="someResource"
		encoding="UTF-8"
		targetProfile="someTarget">

		<file:fileNamePattern>/some/directory</file:fileNamePattern>

		<file:destinationDirectoryPattern>${date}_someFilename.dat</file:destinationDirectoryPattern>

		<file:listFileNamePattern>list.lst</file:listFileNamePattern>

		<file:highWaterMark
			mark="200"
			pollFrequency="1000"
			timeout="60000"/>

		<file:closeOnCondition>true</file:closeOnCondition>

	</file:outputStream>

	<io:router
		routeOnElement="D"
		resourceName="someResource"
		beanId="someBean"
		encoding="UTF-8"
		targetProfile="someTarget"/>

	<jms:router
		routeOnElement="E"
		beanId="somebean"
		destination="queue/some_queue"
		executeBefore="false"
		targetProfile="someTarget">

		<jms:message
			type="TextMessage"
			deliveryMode="persistent"
			priority="4"
			timeToLive="0">

			<jms:correlationIdPattern>${message_correlation}</jms:correlationIdPattern>

		</jms:message>

		<jms:connection
			factory="ConnectionFactory"
			securityPrincipal="myUsername"
			securityCredential="myPassword" />

		<jms:session
			transacted="false"
			acknowledgeMode="AUTO_ACKNOWLEDGE" />

		<jms:jndi
			contextFactory="org.jnp.interfaces.NamingContextFactory"
			namingFactory="org.jboss.naming:java.naming.factory.url.pkgs"
			providerUrl="jnp://localhost:1099"/>

		<jms:highWaterMark
			mark="200"
			pollFrequency="1000"
			timeout="60000"/>

	</jms:router>

</smooks-resource-list>