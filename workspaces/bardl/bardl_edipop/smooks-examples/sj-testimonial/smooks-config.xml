<?xml version="1.0" encoding="ISO-8859-1" ?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.0.xsd">

	<resource-config selector="org.xml.sax.driver">
		<resource>org.milyn.smooks.edi.SmooksEDIParser</resource>
		<param name="mapping-model">
			<![CDATA[
			<medi:edimap xmlns:medi="http://www.milyn.org/schema/edi-message-mapping-1.0.xsd">
			
				<medi:description name="rollingstock_edi" version="1.0" />
				
				<medi:delimiters segment="&#10;" field="," component="*" sub-component="-"/>
				
			    <medi:segments xmltag="rollingstocks">
			    
			        <medi:segment segcode="Ta" xmltag="rollingstock" minOccurs="0" maxOccurs="-1">
		                <medi:field xmltag="departureDate"/>
		                <medi:field xmltag="departureTime"/>
		                <medi:field xmltag="rollingstockId"/>
		                <medi:field xmltag="departureSignature"/>
		                <medi:field xmltag="destinationSignature"/>
		                <medi:field xmltag="dayLimit"/>
		                
			                <medi:segment segcode="Tr" xmltag="route" minOccurs="0" maxOccurs="1">
				                <medi:field xmltag="route"/>
					        </medi:segment>
					        
			                <medi:segment segcode="Fo" xmltag="vehicle" minOccurs="0" maxOccurs="-1">
				                <medi:field xmltag="litt"/>
				                <medi:field xmltag="vehicleId"/>
				                <medi:field xmltag="originalLitt"/>
				                <medi:field xmltag="ticketId"/>
				                <medi:field xmltag="vehicleType"/>
				                <medi:field xmltag="weight"/>
				                <medi:field xmltag="dynamicWeight"/>
				                <medi:field xmltag="brakeWeight"/>
				                <medi:field xmltag="length"/>
				                <medi:field xmltag="nrOfAxles"/>
				                <medi:field xmltag="speed"/>
				                <medi:field xmltag="serviceType"/>
								<medi:field xmltag="canDoorsBeLocked"/>
				                <medi:field xmltag="class1"/>
				                <medi:field xmltag="class2"/>
				                <medi:field xmltag="couchette"/>
				                <medi:field xmltag="nrOfCompartments"/>
				                <medi:field xmltag="nrOfPlacesPerCompartment"/>
				                <medi:field xmltag="departureStation"/>
				                <medi:field xmltag="departureDate"/>
				                <medi:field xmltag="departureTime"/>
				                <medi:field xmltag="destination"/>
			            
			                
					        <medi:segment segcode="Fx" xmltag="comments" minOccurs="0" maxOccurs="1">
				                <medi:field xmltag="comment"/>
					        </medi:segment>
					        
					        <medi:segment segcode="Ft" xmltag="phoneNumber" minOccurs="0" maxOccurs="-1">
				                <medi:field xmltag="litt"/>
				                <medi:field xmltag="vehicleId"/>
				                <medi:field xmltag="phoneNumber"/>
				                <medi:field xmltag="function"/>
				                <medi:field xmltag="location"/>
					        </medi:segment>
				        </medi:segment>
					        
			        </medi:segment>
				        
			    </medi:segments>
			    
			</medi:edimap>
		]]>
		</param>
	</resource-config>

    <resource-config selector="rollingstocks">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">rollingstocks</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.RollingStockList</param>
    </resource-config>

    <resource-config selector="rollingstocks rollingstock">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">rollingstock</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.Rollingstock</param>
        <param name="setOn">rollingstocks</param>
        <param name="setOnMethod">add</param>
        <param name="bindings">
            <binding property="rollingstockId" selector="rollingstock rollingstockId" />
            <binding property="route" selector="rollingstock route route" />
        </param>
    </resource-config>

    <resource-config selector="rollingstocks rollingstock">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">schedule</param>
        <param name="setOn">rollingstock</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.Schedule</param>
        <param name="bindings">
            <binding property="departureStation" type="String" selector="rollingstock departureSignature" />
            <binding property="departureDate" type="Date" selector="rollingstock departureDate" />
            <binding property="departureTime" type="Time" selector="rollingstock departureTime" />
            <binding property="destination" type="String" selector="rollingstock destinationSignature" />
        </param>
    </resource-config>

    <resource-config selector="rollingstocks rollingstock">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">vehicles</param>
        <param name="beanClass">java.util.ArrayList</param>
        <param name="setOn">rollingstock</param>
    </resource-config>

    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">vehicle</param>
        <param name="setOn">vehicles</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.Vehicle</param>
        <param name="bindings">
            <binding property="litt" type="String" selector="vehicle litt" />
            <binding property="originalLitt" type="String" selector="vehicle originalLitt" />
            <binding property="ticketId" type="String" selector="vehicle ticketId" />
            <binding property="vehicleId" type="String" selector="vehicle vehicleId" />
            <binding property="vehicleType" type="String" selector="vehicle vehicleType" />
            <binding property="nrOfAxles" type="Integer" selector="vehicle nrOfAxles" />
            <binding property="serviceType" type="String" selector="vehicle serviceType" />
            <binding property="canDoorsBeLocked" type="Boolean" selector="vehicle canDoorsBeLocked" />
            <binding property="positionInTrainAssembly" type="Boolean" selector="vehicle positionInTrainAssembly" />
        </param>
    </resource-config>

    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">schedule</param>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.Schedule</param>
        <param name="bindings">
            <binding property="departureStation" type="String" selector="vehicle departureStation" />
            <binding property="departureDate" type="Date" selector="vehicle departureDate" />
            <binding property="departureTime" type="Time" selector="vehicle departureTime" />
            <binding property="destination" type="String" selector="vehicle destination" />
        </param>
    </resource-config>

    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">weight</param>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.types.Weight</param>
        <param name="bindings">
            <binding property="weight" type="Double" selector="vehicle weight" default="0" />
        </param>
    </resource-config>
    
    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">dynamicWeight</param>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.types.Weight</param>
        <param name="bindings">
            <binding property="weight" type="Double" selector="vehicle dynamicWeight" default="0" />
        </param>
    </resource-config>
    
    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">dynamicBrakeWeight</param>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.types.Weight</param>
        <param name="bindings">
            <binding property="weight" type="Double" selector="vehicle brakeWeight" default="0" />
        </param>
    </resource-config>
    
    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">length</param>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.types.Length</param>
        <param name="bindings">
            <binding property="length" type="Double" selector="vehicle length" default="0" />
        </param>
    </resource-config>
    
    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">speed</param>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.types.Speed</param>
        <param name="bindings">
            <binding property="speed" type="Double" selector="vehicle speed" default="0" />
        </param>
    </resource-config>
    
    <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">comments</param>
        <param name="beanClass">java.util.ArrayList</param>
        <param name="setOn">vehicle</param>
    </resource-config>

    <resource-config selector="rollingstock vehicle comments">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">comment</param>
        <param name="setOn">comments</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.Comment</param>
        <param name="bindings">
            <binding property="comment" type="String" selector="comment" />
        </param>
    </resource-config>
    
     <resource-config selector="rollingstock vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">phoneNumbers</param>
        <param name="beanClass">java.util.ArrayList</param>
        <param name="setOn">vehicle</param>
    </resource-config>
    
     <resource-config selector="Vehicle phoneNumber">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="beanId">phoneNumber</param>
        <param name="setOn">phoneNumbers</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.PhoneNumber</param>
        <param name="bindings">
            <binding property="function" type="String" selector="phoneNumber function" />
            <binding property="location" type="String" selector="phoneNumber location" />
            <binding property="number" type="String" selector="phoneNumber phoneNumber" />
        </param>
    </resource-config>

    
    <resource-config selector="vehicle">
        <resource>org.milyn.javabean.BeanPopulator</resource>
        <param name="setOn">vehicle</param>
        <param name="beanClass">se.sj.ipl.rollingstock.domain.PassengerCarConfiguration</param>
        <param name="bindings">
            <binding property="class1" type="Integer" selector="vehicle class1" default="0" />
            <binding property="class2" type="Integer" selector="vehicle class2" default="0" />
            <binding property="couchette" type="Integer" selector="vehicle couchette" default="0" />
            <binding property="compartments" type="Integer" selector="vehicle compartments" default="0" />
        </param>
    </resource-config>
    
    <resource-config selector="decoder:Time">
        <resource>org.milyn.javabean.decoders.SqlTimeDecoder</resource>
        <param name="format">HH:mm:ss</param>
    </resource-config>
    
    <resource-config selector="decoder:String">
        <resource>org.milyn.javabean.decoders.StringDecoder</resource>
    </resource-config>
    
    <resource-config selector="decoder:Date">
        <resource>org.milyn.javabean.decoders.SqlDateDecoder</resource>
        <param name="format">yyyy-MM-dd</param>
    </resource-config>
    
</smooks-resource-list>
