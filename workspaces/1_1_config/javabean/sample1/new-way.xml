<?xml version="1.0"?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd" xmlns:jb="http://www.milyn.org/xsd/smooks/javabean">

    <!--
    Create an "example.beans.Order" bean instance when we visit the start of the <order> element.
    Assign the new bean instance to the beanId of "order".
    -->
    <jb:bindings beanId="order" createOnElement="order" class="example.model.Order">
        <jb:wiring property="header" beanIdRef="header" />
        <jb:wiring property="orderItems" beanIdRef="orderItems" />
    </jb:bindings>

    <!--
    Create an ArrayList bean instance when we visit the start of the <order> element.
    Call it "orderItems" and seet it on the "order".
    -->
    <jb:bindings beanId="orderItems" createOnElement="order" class="java.util.ArrayList">
        <jb:wiring beanIdRef="orderItem" />
    </jb:bindings>

    <!--
    Create an "example.beans.Header" bean instance when we visit the start of the <header> element.
    Set the new bean instance on the "order" bean.
    -->
    <jb:bindings beanId="header" createOnElement="order/header" class="example.model.Header">
        <jb:value property="date" data="header/date" type="Date">
            <jb:decodeParam name="format">EEE MMM dd HH:mm:ss z yyyy</jb:decodeParam>
        </jb:value>
        <jb:value property="customerNumber" data="header/customer/@number" type="Long" />
        <jb:value property="customerName" data="header/customer" />
    </jb:bindings>

    <!--
    Create an "example.beans.OrderItem" bean instance when we visit the start of the <order-item> element.
    Set the OrderItem instances on the "orderItem".
    -->
    <jb:bindings beanId="orderItem" createOnElement="order/order-item" class="example.model.OrderItem">
        <jb:value property="productId" data="order-item/product" type="Long" />
        <jb:value property="quantity" data="order-item/quantity" type="Integer" />
        <jb:value property="price" data="order-item/price" type="Double"/>
    </jb:bindings>

</smooks-resource-list>